import spacy

# GiNZAモデルのパス（環境に合わせて変更）
nlp = spacy.load("ja_ginza-5.2.0/ja_ginza/ja_ginza-5.2.0")
#トークン化＋品詞解析＋係り受け解析

# 対象テキスト（メロス）
text = """
メロスは激怒した。
必ず、かの邪智暴虐の王を除かなければならぬと決意した。
メロスには政治がわからぬ。
メロスは、村の牧人である。
笛を吹き、羊と遊んで暮して来た。
けれども邪悪に対しては、人一倍に敏感であった。
"""

doc = nlp(text)

for token in doc:
    # 「メロス」が主語（nsubj）のとき
    if token.text == "メロス" and token.dep_ == "nsubj":
        verb = token.head #メロス が係っている親語（= 述語）を取得
        if verb.pos_ == "VERB": #品詞が動詞(verb)かどうかを判別
            print(f"主語: {token.text}\t述語: {verb.text}（原形: {verb.lemma_}）")

# token.text: 単語Aそのもの（表層系）
# token.head.text: 単語Aの係り先
# token.dep_: 単語Aと係り先の関係（単語Aの役割）
"""
| ラベル     | 意味（日本語）       | 例文内での役割例                             |
|------------|----------------------|----------------------------------------------|
| ROOT       | 文の中心（述語）     | 文のメイン動詞（例：激怒**した**）         |
| nsubj      | 主語（名詞主語）     | **メロス** は激怒した                        |
| obj        | 目的語               | りんごを**食べた** → りんごが `obj`         |
| iobj       | 間接目的語           | 彼に**花をあげた** → 彼が `iobj`            |
| obl        | 副詞句修飾語         | 学校に**行った** → 学校にが `obl`          |
| advmod     | 副詞修飾語           | **必ず**激怒した                             |
| amod       | 形容詞修飾語         | **美しい**花                                 |
| aux        | 助動詞               | 怒っ**た**、食べ**ない**（「た」「ない」）  |
| mark       | 接続助詞             | 〜**ば**、〜**ので**など                     |
| case       | 格助詞               | は、が、を、に、の（名詞に係る）            |
| cc         | 接続詞               | A**と**B、A**や**B                           |
| conj       | 並列要素             | Aと**B** → Bが `conj`                        |
| compound   | 名詞の複合語         | **邪智暴虐**の王 → 邪智が暴虐に `compound`  |

"""