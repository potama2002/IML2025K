import google.generativeai as genai
import os
from dotenv import load_dotenv

# 環境変数からAPIキーを読み込む
load_dotenv()
api_key = os.getenv("GOOGLE_API_KEY")

# APIキーを設定
genai.configure(api_key=api_key)

# モデルの設定
model = genai.GenerativeModel("gemini-1.5-flash-8b")

# プロンプトの作成
prompt = """
以下の例を参考に、最後の問題の解答を導き出してください。

例題1:
日本の近代化に関連するできごとについて述べた次のア～ウを年代の古い順に正しく並べよ。

ア　府知事・県令からなる地方官会議が設置された。
イ　廃藩置県が実施され，中央から府知事・県令が派遣される体制になった。
ウ　すべての藩主が，天皇に領地と領民を返還した。

解答: ウ→イ→ア

例題2:
江戸幕府の北方での対外的な緊張について述べた次の文ア～ウを年代の古い順に正しく並べよ。

ア　レザノフが長崎に来航したが，幕府が冷淡な対応をしたため，ロシア船が樺太や択捉島を攻撃した。
イ　ゴローウニンが国後島に上陸し，幕府の役人に捕らえられ抑留された。
ウ　ラクスマンが根室に来航し，漂流民を届けるとともに通商を求めた。

解答: ウ→ア→イ

例題3:
中居屋重兵衛の生涯の期間におこったできごとについて述べた次のア～ウを，年代の古い順に正しく並べよ。

ア　アヘン戦争がおこり，清がイギリスに敗北した。
イ　異国船打払令が出され，外国船を撃退することが命じられた。
ウ　桜田門外の変がおこり，大老の井伊直弼が暗殺された。

解答: イ→ア→ウ

例題4:
加藤高明が外務大臣として提言を行ってから、内閣総理大臣となり演説を行うまでの時期のできごとについて述べた次のア～ウを，年代の古い順に正しく並べよ。

ア　朝鮮半島において，独立を求める大衆運動である三・一独立運動が展開された。
イ　関東大震災後の混乱のなかで，朝鮮人や中国人に対する殺傷事件がおきた。
ウ　日本政府が，袁世凱政府に対して二十一カ条の要求を突き付けた。

解答: ウ→ア→イ

問題:
9世紀に活躍した人物に関係するできごとについて述べた次のア～ウを年代の古い順に正しく並べよ。

ア　藤原時平は，策謀を用いて菅原道真を政界から追放した。
イ　嵯峨天皇は，藤原冬嗣らを蔵人頭に任命した。
ウ　藤原良房は，承和の変後，藤原氏の中での北家の優位を確立した。

上記の例を参考に、この問題の解答を示してください。具体的な年代とともに説明を加えてください。
"""

# APIリクエストの送信
response = model.generate_content(prompt)

# 結果の表示
print("解答:")
print(response.text)


"""解答:
解答: イ→ウ→ア

解説:

問題文から、ア、イ、ウの出来事が全て9世紀に起こったことが読み取れます。正確な年代を特定するために、それぞれの出来事が発生した時期をざっくりと推測し、年代順に並べます。

* **イ　嵯峨天皇は，藤原冬嗣らを蔵人頭に任命した。**  嵯峨天皇は806年から823年まで天皇在位。蔵人頭は朝廷の中枢的な役職であり、この任命は嵯峨天皇の治世初期に起きたと考えられます。

* **ウ　藤原良房は，承和の変後，藤原氏の中での北家の優位を確立した。** 承和の変は839年。藤原良房は承和の変後に北家の優位を確立したため、この出来事は839年以降と推測できます。

* **ア　藤原時平は，策謀を用いて菅原道真を政界から追放した。** 菅原道真を追放したのは894年。この出来事は上記イ、ウの出来事より後の出来事です。


上記を総合すると、イ→ウ→ア の順序になります。


正確な年代を把握する上で、参考となる歴史資料を提示できれば、より精度の高い解答が可能になります。  例えば、各出来事の発生した具体的な年号を明記することで、解答の正確性をより高めることができます。  しかし、問題文の情報だけでは、より詳細な年代順の推定は困難です。
"""