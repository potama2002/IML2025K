import google.generativeai as genai
import os
from dotenv import load_dotenv

# 環境変数からAPIキーを読み込む
load_dotenv()
api_key = os.getenv("GOOGLE_API_KEY")

# APIキーを設定
genai.configure(api_key=api_key)

# モデルの設定
model = genai.GenerativeModel("gemini-1.5-flash-8b")

# 評価対象の川柳リスト
senryu_list = [
    "1.夏の夕焼け　スマホ片手に　空眺める"

    "2.秋風そよぐ　読書にひたる　至福の時"

    "3.冬至の夜　あったかい鍋で　笑顔いっぱい"

    "4.春の桜咲く　恋する気分で　いいね！連打"
    
    "5.初夏の夏　虫の声に耳澄ませて　夢見る夜"
    
    "6.梅雨の晴れ間　散歩に出かける　気分爽快"
    
    "7.夏休み満喫　ゲーム三昧で　青春謳歌"
    
    "8.夕飯のあと　コーヒー片手に　静かな夜　"
    
    "9.旅行の途中　見慣れない景色に　感嘆の声"
    
    "10.年末の大掃除　スッキリ片付くと　新年気分"
]

# 評価プロンプトの作成
evaluation_prompt = """
あなたは川柳の専門家として、以下の川柳を評価してください。
各川柳について、面白さを10段階（1〜10）で評価し、その理由を簡潔に説明してください。

評価対象の川柳：
"""

# 各川柳を評価プロンプトに追加
for i, senryu in enumerate(senryu_list, 1):
    evaluation_prompt += f"{i}. {senryu}\n"

evaluation_prompt += """
出力形式：
1. [川柳]
   評価：[1〜10の数値]
   理由：[評価理由の簡潔な説明]

2. [川柳]
   評価：[1〜10の数値]
   理由：[評価理由の簡潔な説明]

（以下10個分続く）

最後に、全体的な評価と総合的なコメントを追加してください。
"""

# APIリクエストの送信
response = model.generate_content(evaluation_prompt)

# 結果の表示
print("川柳の評価結果：")
print(response.text)

"""1. [1.夏の夕焼け　スマホ片手に　空眺める]
   評価：6
   理由：夏の夕焼けとスマホという現代的な要素が対比されていて、少し新鮮。しかし、やや陳腐な表現で、驚きや共感を得るには至らない。

2. [2.秋風そよぐ　読書にひたる　至福の時]
   評価：7
   理由：秋の情景と読書という落ち着いた行為がマッチし、心地よい気分が伝わる。至福の時という表現が、読者の共感を誘う。

3. [3.冬至の夜　あったかい鍋で　笑顔いっぱい]
   評価：8
   理由：冬至の風物詩である鍋と、笑顔という温かい情景が印象的。シンプルで分かりやすく、読者の共感を呼び起こす。

4. [4.春の桜咲く　恋する気分で　いいね！連打]
   評価：7
   理由：春の桜と現代のSNS「いいね！」が結びつけられていて、現代的な感覚が新鮮。共感できる部分と斬新な点がありバランスが良い。

5. [5.初夏の夏　虫の声に耳澄ませて　夢見る夜]
   評価：6
   理由：初夏の情景と、虫の声に耳澄ますという行為が、微妙に不自然な組み合わせ。少し言葉足らずで、想像力が掻き立てられるほどではない。

6. [6.梅雨の晴れ間　散歩に出かける　気分爽快]
   評価：9
   理由：梅雨の晴れ間という季節感と散歩、爽快というキーワードが、読者の五感を刺激する。ストレートで分かりやすい表現。

7. [7.夏休み満喫　ゲーム三昧で　青春謳歌]
   評価：7
   理由：夏休みとゲーム、青春謳歌という現代的なキーワードで、共感を得やすい。しかし、少し安易な表現で、深みがない。

8. [8.夕飯のあと　コーヒー片手に　静かな夜]
   評価：8
   評価：夕飯後の静寂とコーヒーという日常的な情景が、安らぎを醸し出す。シンプルな表現ながら、温かい気持ちにさせてくれる。

9. [9.旅行の途中　見慣れない景色に　感嘆の声]
   評価：7
   理由：旅行中の感動的な情景を、簡潔に表現。しかし、少し抽象的で、読者の想像力を掻き立てるには至らない。

10. [10.年末の大掃除　スッキリ片付くと　新年気分]
   評価：9
   理由：年末の大掃除という誰もが経験する行為と、新年気分という明るい感情が結びつき、共感を呼ぶ。ストレートで分かりやすい。


**全体的な評価と総合的なコメント**

今回の川柳は、全体的に可もなく不可もなくといった印象です。特に、季節感をうまく表現し、読者の共感を呼び起こしているもの、日常の情景を簡潔に表現したもの（6, 8, 10など）は高評価です。一方、やや陳腐な表現や、言葉足らずで想像力を掻き立てられないもの（1, 5, 9など）も散見されます。

現代的な要素を取り入れた川柳（4, 7）もあれば、季節感や日常に根ざした川柳（2, 3, 8, 10）もあります。それぞれの川柳の特色を活かし、より魅力的な表現を磨くことが重要です。


より共感を得るためには、より具体的な情景や、独特の視点、言葉の選び方などに工夫を加える必要があります。
"""