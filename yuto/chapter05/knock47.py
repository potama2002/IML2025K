import google.generativeai as genai
import os
from dotenv import load_dotenv

# 環境変数からAPIキーを読み込む
load_dotenv()
api_key = os.getenv("GOOGLE_API_KEY")

# APIキーを設定
genai.configure(api_key=api_key)

# モデルの設定
model = genai.GenerativeModel("gemini-1.5-flash-8b")

# 評価対象の川柳リスト
senryu_list = [
    "1.夏の夕焼け　スマホ片手に　空眺める",

    "2.秋風そよぐ　読書にひたる　至福の時",

    "3.冬至の夜　あったかい鍋で　笑顔いっぱい",

    "4.春の桜咲く　恋する気分で　いいね！連打",
    
    "5.初夏の夏　虫の声に耳澄ませて　夢見る夜",
    
    "6.梅雨の晴れ間　散歩に出かける　気分爽快",
    
    "7.夏休み満喫　ゲーム三昧で　青春謳歌",
    
    "8.夕飯のあと　コーヒー片手に　静かな夜　",
    
    "9.旅行の途中　見慣れない景色に　感嘆の声",
    
    "10.年末の大掃除　スッキリ片付くと　新年気分",
]

# 評価プロンプトの作成
evaluation_prompt = """
あなたは川柳の専門家として、以下の川柳を評価してください。
各川柳について、面白さを10段階（1〜10）で評価し、その理由を簡潔に説明してください。

評価対象の川柳：
"""

# 各川柳を評価プロンプトに追加
for i, senryu in enumerate(senryu_list, 1):
    evaluation_prompt += f"{i}. {senryu}\n"

evaluation_prompt += """
出力形式：
1. [川柳]
   評価：[1〜10の数値]
   理由：[評価理由の簡潔な説明]

2. [川柳]
   評価：[1〜10の数値]
   理由：[評価理由の簡潔な説明]

（以下10個分続く）

最後に、全体的な評価と総合的なコメントを追加してください。
"""

# APIリクエストの送信
response = model.generate_content(evaluation_prompt)

# 結果の表示
print("川柳の評価結果：")
print(response.text)



"""川柳の評価結果：
1. [1.夏の夕焼け　スマホ片手に　空眺める]
   評価：7
   理由：夏の夕焼けとスマホという現代的な要素が対比され、少し意外性がある。しかし、やや陳腐な印象で、締まりのなさが目立つ。

2. [2.秋風そよぐ　読書にひたる　至福の時]
   評価：8
   理由：秋の情景と読書という行為が自然に結びつき、落ち着いた趣がある。季語の適切な使用と、至福の感情表現が評価できる。

3. [3.冬至の夜　あったかい鍋で　笑顔いっぱい]
   評価：9
   理由：冬至の風物詩である鍋料理と笑顔というポジティブな感情がうまく表現されている。ストレートで温かい気持ちになれる川柳。

4. [4.春の桜咲く　恋する気分で　いいね！連打]
   評価：6
   理由：春の桜と現代のSNS「いいね！」という結びつきは斬新。しかし「恋する気分」と「いいね！連打」のつながりがやや唐突で、説得力に欠ける。

5. [5.初夏の夏　虫の声に耳澄ませて　夢見る夜]
   評価：7
   理由：初夏の情景と夏の虫の声、夢見るという情緒が心地よい。しかし「初夏の夏」という表現が少し冗長で、簡潔さを欠く。

6. [6.梅雨の晴れ間　散歩に出かける　気分爽快]
   評価：8
   理由：梅雨の晴れ間という限定的な情景と、爽快な気分の変化を簡潔に表現している。季語と感情の結びつきが自然で、読みやすい。

7. [7.夏休み満喫　ゲーム三昧で　青春謳歌]
   評価：7
   理由：夏休み満喫とゲーム三昧という現代的な状況が、青春謳歌という定番の言葉と結びついている。現代的ですが、やや一般的な印象で、独自性や驚きが足りない。

8. [8.夕飯のあと　コーヒー片手に　静かな夜]
   評価：9
   理由：日常的なシーンを丁寧に描写し、静かな夜の落ち着いた雰囲気を醸し出している。シンプルで温かい気持ちになれる川柳。

9. [9.旅行の途中　見慣れない景色に　感嘆の声]
   評価：7
   理由：旅行の途中で出会う、新鮮な景色と感嘆の声という描写は良い。しかし、やや抽象的で、具体性が不足している。

10. [10.年末の大掃除　スッキリ片付くと　新年気分]
   評価：8
   理由：年末の大掃除という行事と新年気分という結果が自然に繋がっている。日常的な出来事を通して、新年への期待感を表現している。


全体的な評価：
全体的に、平凡な川柳が多い印象です。季語や情景を活かしつつも、現代社会への適応、驚き、そして言葉の選び方、表現の巧みさが課題です。特に、季語と現代要素をうまく融合させた川柳は、評価が低めでした。3番、8番、10番は特に良い出来栄えでした。より一層の表現力向上を目指してほしいですね。

総合的なコメント：
川柳は、短い言葉で心に響くもの。より独創的で、読者に驚きや感動を与えるような川柳を目指しましょう。特に、現代の言葉や情景と季語を結びつける際、無理のない自然なつながり、表現方法が大切です。"""